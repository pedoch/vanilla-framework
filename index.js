var l=()=>{window.vanillaFramework||(window.vanillaFramework={})};function d(e,i){let t;e.parentNode.classList.contains("p-navigation__item--dropdown-close")?t=e.parentNode.parentNode.parentNode:t=e.parentNode;let o=document.getElementById(e.getAttribute("aria-controls"));if(o.setAttribute("aria-hidden",!i),i){t.classList.add("is-active");let a=t.closest(".p-navigation__dropdown, .p-navigation__nav");a&&(a.scrollTop=0),o.classList.remove("is-dropdown-collapsed"),o.classList.add("is-dropdown-expanded")}else t.classList.remove("is-active"),o.classList.remove("is-dropdown-expanded"),o.classList.add("is-dropdown-collapsed")}function r(e,i){e.forEach(function(t){i?!i[t.parentNode.id]&&!t.parentNode.classList.contains("p-navigation__item--dropdown-close")&&d(t,!1):d(t,!1)})}function f(e,i){document.addEventListener("click",function(t){let o=t.target;o.closest&&(o.closest(i)||r(e))})}function v(e,i,t){let o;if(e.parentNode.classList.contains("p-navigation__item--dropdown-close"))o=!1;else{let n={},s=e.parentNode,c=["p-navigation__item--dropdown-toggle","is-active"];for(;s.parentNode&&s.parentNode.nodeName.toLowerCase()!="body";)s=s.parentNode,c.every(u=>s.classList.contains(u))&&(n[s.id]=s);o=!e.parentNode.classList.contains("is-active"),r(i,n)}let a=document.getElementById(e.getAttribute("aria-controls"));o&&a.classList.remove("is-dropdown-hidden"),d(e,o)}function m(e,i,t){i.classList.contains("has-menu-open")?(e.textContent="Menu",i.classList.remove("has-menu-open"),r(t)):(e.textContent="Close menu",i.classList.add("has-menu-open"),r(t))}var w=function(e,i){var t=null;return function(){var o=this,a=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(o,a)},i)}};function p(){let e=[".p-navigation__item--dropdown-toggle",".p-navigation__item--dropdown-close"],i=document.querySelector(".p-navigation"),t=[].slice.call(i.querySelectorAll(".p-navigation__dropdown, .p-navigation__dropdown--right")),o=[].slice.call(i.querySelectorAll(e.map(n=>n+" [aria-controls]").join(", "))),a=i.querySelector(".js-menu-button");a&&a.addEventListener("click",function(n){n.preventDefault(),m(a,i,o)}),f(o,e),t.forEach(function(n){n.parentNode.classList.contains("is-active")||n.classList.add("is-dropdown-hidden"),n.addEventListener("animationend",function(s){if(s.stopPropagation(),n.parentNode.classList.contains("is-active")){let c=n.querySelector(".p-navigation__item--dropdown-close > .p-navigation__link");c&&c.focus()}else{n.classList.add("is-dropdown-hidden");let c=n.parentNode.querySelector(".p-navigation__link");c&&c.focus()}},!1)}),o.forEach(function(n){n.addEventListener("click",async function(s){s.preventDefault(),v(n,o,e)})}),window.addEventListener("resize",w(function(){t.forEach(n=>{n.setAttribute("aria-expanded",!1),n.classList.remove("is-dropdown-expanded"),n.classList.remove("is-dropdown-collapsed"),n.classList.add("is-dropdown-hidden"),n.parentNode.classList.remove("is-active")})},10))}l();window.vanillaFramework.slidingNav=()=>{p()};export{p as initNavDropdowns};
//# sourceMappingURL=index.js.map
